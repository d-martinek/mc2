{"remainingRequest":"/home/danijel/Documents/Workspace/mc2/frontend/node_modules/babel-loader/lib/index.js!/home/danijel/Documents/Workspace/mc2/frontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/danijel/Documents/Workspace/mc2/frontend/src/store/index.js","dependencies":[{"path":"/home/danijel/Documents/Workspace/mc2/frontend/src/store/index.js","mtime":1560857041685},{"path":"/home/danijel/Documents/Workspace/mc2/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1557082350867},{"path":"/home/danijel/Documents/Workspace/mc2/frontend/node_modules/babel-loader/lib/index.js","mtime":1557082335768},{"path":"/home/danijel/Documents/Workspace/mc2/frontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1557082347922}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _Promise from \"/home/danijel/Documents/Workspace/mc2/frontend/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport var store = new Vuex.Store({\n  state: {\n    userAuthenticated: false,\n    user: null,\n    selectedOptions: {\n      skolaId: \"\",\n      fakultet: \"\",\n      fakultetId: \"\",\n      smjerId: \"\",\n      zanimanjeId: \"\",\n      slucajOdabira: 0\n    },\n    pathOptions: {\n      skole: [],\n      fakulteti: [],\n      zanimanja: []\n    },\n    routeHandler: false //handling forward and backward route change, to prevent errors\n\n  },\n  getters: {\n    checkAuth: function checkAuth(state) {\n      return state.userAuthenticated;\n    }\n  },\n  mutations: {\n    logoutUser: function logoutUser(state) {\n      axios.get(\"/api/logout\").then(function (res) {\n        if (res.data.authCleared == true) {\n          state.userAuthenticated = false;\n          state.user = null;\n        }\n      });\n    }\n  },\n  actions: {\n    resetData: function resetData(context) {\n      context.state.selectedOptions.skolaId = '';\n      context.state.selectedOptions.fakultetId = '';\n      context.state.selectedOptions.smjerId = '';\n      context.state.selectedOptions.zanimanjeId = '';\n      context.state.selectedOptions.slucajOdabira = 0;\n    },\n    getPathOptions: function getPathOptions(context) {\n      axios.get('/api/skole').then(function (res) {\n        if (res.status == 200) {\n          context.state.pathOptions.skole = res.data;\n        }\n      });\n      axios.get('/api/fakulteti').then(function (res) {\n        if (res.status == 200) {\n          context.state.pathOptions.fakulteti = res.data;\n        }\n      });\n      axios.get('/api/zanimanja').then(function (res) {\n        if (res.status == 200) {\n          context.state.pathOptions.zanimanja = res.data;\n        }\n      });\n    },\n    authUser: function authUser(context) {\n      if (!context.state.userAuthenticated) {\n        return new _Promise(function (resolve) {\n          axios.get(\"/api/auth\").then(function (res) {\n            if (res.data.auth == true) {\n              context.state.userAuthenticated = true;\n              context.state.user = res.data.userData;\n\n              if (context.state.user.highSchool) {\n                context.state.selectedOptions.skolaId = context.state.user.highSchool;\n              }\n            }\n\n            resolve(context.state.userAuthenticated);\n          }, function (error) {\n            resolve(error);\n          });\n        });\n      } else {\n        return context.state.userAuthenticated;\n      }\n    },\n    permissionAllowed: function permissionAllowed(context, permissionArray) {\n      if (context.state.userAuthenticated) {\n        return new _Promise(function (resolve) {\n          resolve(permissionArray.includes(context.state.user.role.roleLevel));\n        });\n      } else {\n        return new _Promise(function (resolve) {\n          context.dispatch('authUser').then(function (auth) {\n            if (auth === true) {\n              resolve(permissionArray.includes(context.state.user.role.roleLevel));\n            } else {\n              resolve(false);\n            }\n          });\n        });\n      }\n    }\n  }\n});",{"version":3,"sources":["/home/danijel/Documents/Workspace/mc2/frontend/src/store/index.js"],"names":["Vue","Vuex","axios","use","store","Store","state","userAuthenticated","user","selectedOptions","skolaId","fakultet","fakultetId","smjerId","zanimanjeId","slucajOdabira","pathOptions","skole","fakulteti","zanimanja","routeHandler","getters","checkAuth","mutations","logoutUser","get","then","res","data","authCleared","actions","resetData","context","getPathOptions","status","authUser","resolve","auth","userData","highSchool","error","permissionAllowed","permissionArray","includes","role","roleLevel","dispatch"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\n\nVue.use(Vuex)\n\nexport const store = new Vuex.Store({\n    state: {\n        userAuthenticated: false,\n        user: null,\n        selectedOptions: {\n            skolaId: \"\",\n            fakultet: \"\",\n            fakultetId: \"\",\n            smjerId: \"\",\n            zanimanjeId: \"\",\n            slucajOdabira: 0\n        },\n        pathOptions: {\n            skole: [],\n            fakulteti: [],\n            zanimanja: []\n        },\n        routeHandler: false //handling forward and backward route change, to prevent errors\n    },\n\n    getters: {\n        checkAuth(state) { return state.userAuthenticated }\n    },\n\n    mutations: {\n        logoutUser(state) {\n            axios.get(\"/api/logout\")\n            .then(res => {\n                if(res.data.authCleared == true){\n                    state.userAuthenticated = false\n                    state.user = null\n                }\n            })\n        }\n    },\n    \n    actions: {\n        resetData(context) {\n            context.state.selectedOptions.skolaId = ''\n\t\t\tcontext.state.selectedOptions.fakultetId = ''\n\t\t\tcontext.state.selectedOptions.smjerId = ''\n            context.state.selectedOptions.zanimanjeId = ''\n            context.state.selectedOptions.slucajOdabira = 0\n        },\n\n        getPathOptions(context) {\n            axios.get('/api/skole')\n            .then(res => {\n                if(res.status == 200){\n                    context.state.pathOptions.skole = res.data\n                }\n            })\n\n            axios.get('/api/fakulteti')\n            .then(res => {\n                if(res.status == 200){\n                    context.state.pathOptions.fakulteti = res.data\n                }\n            })\n\n            axios.get('/api/zanimanja')\n            .then(res => {\n                if(res.status == 200){\n                    context.state.pathOptions.zanimanja = res.data\n                }\n            })\n\n        },\n\n        authUser(context) {\n            if(!context.state.userAuthenticated){\n                return new Promise(resolve => {\n                    axios.get(\"/api/auth\")\n                    .then(res => {\n                        if(res.data.auth == true){\n                            context.state.userAuthenticated = true\n                            context.state.user = res.data.userData\n                            \n                            if(context.state.user.highSchool){\n                                context.state.selectedOptions.skolaId = context.state.user.highSchool\n                            }\n                        }\n                        resolve(context.state.userAuthenticated)\n                    }, error => {\n                        resolve(error)\n                    })\n                })\n            }\n            else{\n                return context.state.userAuthenticated\n            }\n        },\n        permissionAllowed(context, permissionArray){\n            if(context.state.userAuthenticated){\n                return new Promise(resolve => {\n                    resolve(permissionArray.includes(context.state.user.role.roleLevel))\n                })\n            }else{\n                return new Promise(resolve => {\n                    context.dispatch('authUser').then(auth => {\n                        if(auth === true){\n                            resolve(permissionArray.includes(context.state.user.role.roleLevel))\n                        } else {\n                            resolve(false)\n                        }\n                    })\n                })\n            }\n        }\n    }\n})"]}]}